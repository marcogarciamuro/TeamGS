<!DOCTYPE html>
<html lang="en">
    <head>
        {% include "bootstrap.html" %}
        {% load static %}
        {% load extras %}
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="{% static 'teamGS.css' %}" />
        <script src="https://kit.fontawesome.com/755c2f7a3d.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
        <meta name="description" content="Sports Website" />
        <meta name="keywords" content="sports, website, soccer, basketball" />
        <title>{{ team.name }}</title>
        {% include "toggleSoccerLike.html" %}
    </head>
    <body>
        {% include "navigation.html" %}
        <div class="container">
            <div class="container mt-3">
                <form method="post" action="{% url 'soccer-team-page' %}" class="mt-3 mb-5">
                    <div class="row justify-content-end">
                        <div class="col-auto">
                            <div class="input-group">
                                {% csrf_token %}
                                {{ search_form }}
                                <button class="btn btn-primary" type="submit">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
                <span>
                    <h1>
                        {% csrf_token %}
                        {{ team.name }}
                        <button id="toggle-team-like-button"
                                title="{% if team_is_liked %} Unlike Team {% else %} Like Team {% endif %}"
                                type="submit"
                                class="{% if team_is_liked %} fa-solid fa-star {% else %} fa-regular fa-star {% endif %}">
                        </button>
                    </h1>
                </span>
                <h3>
                    <a href="{% url 'soccer-chat-room' team_name_formatted %}"
                       class="removeLinkUnderline"> Chat Room <i class="fa-solid fa-comments"></i></a>
                </h3>
            </div>
            <div class="container mt-3">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="col-12">
                            <div class="container mb-5 mt-3 ps-0">
                                <h2>Previous Games</h2>
                                <div id="wg-api-football-fixtures"
                                     data-host="api-football-v1.p.rapidapi.com"
                                     data-refresh="0"
                                     data-date=""
                                     data-league=""
                                     data-team="{{ team.teamID }}"
                                     data-season=""
                                     data-last="5"
                                     data-next=""
                                     data-key="{% get_env_var 'SOCCER_API_KEY' %}"
                                     data-theme=""
                                     data-show-errors="true"
                                     class="api_football_loader">
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="container mb-3 ps-0">
                                <h2>Upcoming Games</h2>
                                <iframe scrolling="no"
                                        allowfullscreen="true"
                                        webkitallowfullscreen="true"
                                        mozallowfullscreen="true"
                                        width="100%"
                                        height="200"
                                        src="/soccer/upcoming-matches/{{ team.teamID }}"></iframe>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="container mb-5 ps-0">
                                <h2>League Standings</h2>
                                <div id="wg-api-football-standings"
                                     data-host="api-football-v1.p.rapidapi.com"
                                     data-league="{{ league_id }}"
                                     data-team=""
                                     data-season="{{ cur_season }}"
                                     data-key="{% get_env_var 'SOCCER_API_KEY' %}"
                                     data-theme=""
                                     data-show-errors="true"
                                     class="api_football_loader">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="container mt-3 ps-0">
                            <h2>Popular Articles</h2>
                            {% for article in articles %}
                                <ul class="ps-0">
                                    <h5>{{ article.title }}</h5>
                                    <img src="{{ article.thumbnail }}"
                                         alt="Article Thumbnail"
                                         width="50%"
                                         height="50%"/>
                                    <p class="description">{{ article.description }}</p>
                                    <a href="{{ article.url }}"
                                       target="_blank"
                                       rel="noopener noreferrer"
                                       class="description">Go to article</a>
                                </ul>
                                <br />
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="module" src="https://widgets.api-sports.io/football/1.1.8/widget.js"></script>
    </body>
</html>
